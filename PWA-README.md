# Retos Fútbol - PWA Guide

This guide provides comprehensive instructions for testing and using the Progressive Web App (PWA) features of Retos Fútbol.

## 🚀 Key PWA Features

- **Installable** - Add to home screen on mobile and desktop
- **Offline-First** - Works without an internet connection
- **App-like Experience** - Full-screen, standalone mode
- **Fast Loading** - Assets are cached for instant loading
- **Automatic Updates** - Get the latest version automatically
- **Network Resilience** - Handles flaky connections gracefully

## 🧪 Testing PWA Features

### 1. Installation Testing
#### Mobile (Android/Chrome)
1. Open the app in Chrome on your Android device
2. Tap the menu (⋮) and select "Add to Home screen"
3. Confirm the installation
4. The app will appear on your home screen

#### Desktop (Chrome/Edge/Opera)
1. Open the app in Chrome/Edge
2. Look for the install icon (⬇️) in the address bar
3. Click "Install" and confirm
4. The app will launch in its own window

### 2. Offline Mode Testing
1. Install the app first
2. Open the app and navigate to different sections
3. Enable Airplane mode or disconnect from the network
4. The app should continue to work with cached content
5. You'll see an offline indicator in the UI

### 3. Update Testing
1. Make changes to the app code
2. Deploy a new version
3. When you open the app, a toast notification will appear
4. Click "Update" to load the latest version
5. The page will automatically reload with the new version

### 4. Performance Testing
1. Open Chrome DevTools (F12)
2. Go to the 'Lighthouse' tab
3. Run an audit with the 'Progressive Web App' category
4. The app should score 90+ on PWA metrics

## 🛠️ Development

### Service Worker
- Location: `/src/service-worker.js`
- Features:
  - Precaching of static assets
  - Network-first strategy for API requests
  - Offline fallback page
  - Background sync support
  - Push notifications support

### PWA Configuration
- **Manifest**: `/public/manifest.json` (auto-generated)
- **Icons & Splash Screens**: Generated by `npm run generate-pwa-assets`
- **Styles**: `/src/pwa-styles.css`
- **Installation**: Handled by `/src/utils/installPWA.js`
- **Updates**: Managed by `/src/registerServiceWorker.js`

### Build & Deploy
```bash
# Install dependencies
npm install

# Generate PWA assets (icons, splash screens, manifest)
npm run generate-pwa-assets

# Build the app for production
npm run build

# Preview the production build
npm run preview
```

## 🔍 Debugging

### Service Worker
1. Open Chrome DevTools (F12)
2. Go to 'Application' > 'Service Workers'
3. Check 'Update on reload' for development
4. Use 'Clear storage' to reset service worker state

### Cache Inspection
1. Open Chrome DevTools (F12)
2. Go to 'Application' > 'Cache Storage'
3. Inspect cached resources

## 🚨 Troubleshooting

### Common Issues
1. **App not installing**
   - Ensure you're using HTTPS in production
   - Check the manifest is valid
   - Verify the service worker is registered

2. **Updates not showing**
   - Wait for the service worker to update (usually within 24 hours)
   - Or force update by unregistering the service worker in DevTools

3. **Offline mode not working**
   - Check service worker is properly registered
   - Verify assets are being cached
   - Look for errors in the console

## 📱 PWA Best Practices

1. **Icons**
   - Multiple sizes for different devices
   - Maskable icon for Android
   - Apple Touch Icon for iOS

2. **Splash Screens**
   - Generated for all iOS device sizes
   - Theme color matches app design

3. **Performance**
   - Lazy load non-critical resources
   - Optimize images and assets
   - Use code splitting

## 📚 Additional Resources

- [Web App Manifest](https://web.dev/add-manifest/)
- [Service Worker API](https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API)
- [PWA Checklist](https://web.dev/pwa-checklist/)
- [Workbox Documentation](https://developers.google.com/web/tools/workbox)

### Clearing Cache
If you're having issues with the service worker, you can:
1. Open Chrome DevTools
2. Go to Application > Clear Storage
3. Click "Clear site data"
4. Check "Unregister service workers" and click "Clear"

### Debugging Service Worker
1. Open Chrome DevTools
2. Go to Application > Service Workers
3. Check "Update on reload" for easier debugging
4. View cache contents under Cache Storage

## Browser Support
- Chrome (Android, Windows, macOS, Linux)
- Edge (Windows, Android)
- Safari (iOS 11.3+, macOS)
- Firefox (Android, Windows, macOS, Linux)
